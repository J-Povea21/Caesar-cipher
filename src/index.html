<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script> 
</head>
<body class="relative flex bg-gray-900 justify-center h-screen w-screen">
  <div class="absolute w-[300px] bg-white rounded-md top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 p-4">
    <div class="h-9 items-center justify-center rounded-lg bg-gray-200 p-1 text-gray-900 grid w-full grid-cols-2 mb-4"><button type="button" class="bg-white inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium">Cifrar</button><button type="button" class="inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium">Descifrar</button></div>
    <label for="message" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Texto Cifrado</label>
    <p class="p-4 bg-gray-100 rounded-md text-gray-900 text-sm mb-4 " id="messenger"></p>
    
<label for="message" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Texto Sin Cifrar</label>
<textarea id="message" rows="4" class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 mb-4" placeholder="Escribe tu mensaje aqui..."></textarea>
<button type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">Descifrar</button>
  </div>

  <script>
    var Messenger = function(el){
      'use strict';
      var m = this;
      var element = document.querySelector(el);
      
      m.init = function(){
        m.codeletters = "&#*+%?ยฃ@ยง$";
        m.message = 0;
        m.current_length = 0;
        m.fadeBuffer = false;
        m.messages = [
          'Mensaje cifrado.'
        ];
        
        setTimeout(m.animateIn, 100);
      };
      
      m.generateRandomString = function(length){
        var random_text = '';
        while(random_text.length < length){
          random_text += m.codeletters.charAt(Math.floor(Math.random()*m.codeletters.length));
        } 
        
        return random_text;
      };
      
      m.animateIn = function(){
        if(m.current_length < m.messages[m.message].length){
          m.current_length = m.current_length + 2;
          if(m.current_length > m.messages[m.message].length) {
            m.current_length = m.messages[m.message].length;
          }
          
          var message = m.generateRandomString(m.current_length);
          element.innerHTML = message;
          
          setTimeout(m.animateIn, 20);
        } else { 
          setTimeout(m.animateFadeBuffer, 20);
        }
      };
      
      m.animateFadeBuffer = function(){
        if(m.fadeBuffer === false){
          m.fadeBuffer = [];
          for(var i = 0; i < m.messages[m.message].length; i++){
            m.fadeBuffer.push({c: (Math.floor(Math.random()*12))+1, l: m.messages[m.message].charAt(i)});
          }
        }
        
        var do_cycles = false;
        var message = ''; 
        
        for(var i = 0; i < m.fadeBuffer.length; i++){
          var fader = m.fadeBuffer[i];
          if(fader.c > 0){
            do_cycles = true;
            fader.c--;
            message += m.codeletters.charAt(Math.floor(Math.random()*m.codeletters.length));
          } else {
            message += fader.l;
          }
        }
        
        element.innerHTML = message;
        
        if(do_cycles === true){
          setTimeout(m.animateFadeBuffer, 50);
        } else {
          setTimeout(m.cycleText, 2000);
        }
      };
      
      m.cycleText = function(){
        m.message = m.message + 1;
        if(m.message < m.messages.length){
          m.current_length = 0;
          m.fadeBuffer = false;
          element.innerHTML = '';
          setTimeout(m.animateIn, 200);
        }
      };
      
      m.init();
    }

    console.clear();
    var messenger = new Messenger('#messenger');
  </script>
</body>
</html>